<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIMA ASWAN - Dependents</title>
    <link rel="stylesheet" href="../static/CSS/Dependents.css">
</head>
<body>
    <div class="container">
        <!-- Include sidebar component -->
        <!-- Sidebar Component -->
<link rel="stylesheet" href="../static/CSS/components/header.css">
<link rel="stylesheet" href="../static/CSS/components/sidebar.css">
<link rel="stylesheet" href="../static/CSS/components/footer.css">

<div id="sidebarOverlay" class="sidebar-overlay"></div>

<aside id="sidebar" class="sidebar closed">
    <div class="logo">
        <div class="logo-icon">‚ò•</div>
        <div class="logo-text">KIMA ASWAN</div>
    </div>

    <ul class="nav-menu">
        <li class="nav-item" onclick="window.location.href='/'">Dashboard</li>
        <li class="nav-item" onclick="window.location.href='/employees'">Employees</li>
        <li class="nav-item" onclick="window.location.href='/suppliers'">Suppliers</li>
        <li class="nav-item" onclick="window.location.href='/products'">Products</li>
        <li class="nav-item" onclick="window.location.href='/customers'">Customers</li>
    </ul>

    <div class="help-section">
        <div class="help-title">Need help?</div>
        <div class="help-link">Open our help center</div>
    </div>
</aside>

        <script src="../static/JS/components/sidebar.js"></script>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Include header component -->
            <!-- Header Component -->

<header class="header">
    <!-- Sidebar Toggle Button (for mobile) -->
    <button id="sidebarToggle" class="sidebar-toggle">
        <img src="../static/assets/menu-bar.png" style="width: 35px; height: 35px;">
    </button>
    <div class="search-container">
        <span class="search-icon"><img src="https://i.postimg.cc/6pMgv9SK/search-svgrepo-com.png" alt="Search Icon" style="width:20px; height:20px;"></span>
        <input type="text" class="search-box" placeholder="Search">
        <span class="mic-icon"><img src="https://i.postimg.cc/W4rmP80k/microphone-svgrepo-com.png" alt="Microphone Icon" style="width:20px; height:20px;"></span>
    </div>
    <div class="header-right">
        <a class="header-link" onclick="window.location.href='/'">Home</a>
        <button class="icon-btn"><img src="https://i.postimg.cc/5tqH3Rw7/bell-alt-svgrepo-com.png" alt="Notification Bell" style="width:20px; height:20px;"></button>
        <!-- Profile Dropdown -->
        <div class="profile-dropdown-wrapper">
            <button class="icon-btn profile-icon-btn" id="profileIconBtn" type="button">
                <img src="https://i.postimg.cc/YSp2pqW5/profile-round-1342-svgrepo-com.png" alt="Profile" style="width:20px; height:20px;">
            </button>
            <div class="profile-dropdown" id="profileDropdown">
                <div class="user-info">
                    <div class="user-icon">üë§</div>
                    <div class="user-details">
                        <div class="username">Username</div>
                        <div class="email">user.mail@gmail.com</div>
                    </div>
                </div>
                <hr class="separator">
                <button class="dropdown-item setting" onclick="openSettings()">
                    <div class="setting-icon">‚öôÔ∏è</div>
                    <span>Setting</span>
                </button>
                <button class="dropdown-item logout" onclick="logout()">
                    <div class="logout-icon">‚ñ∂</div>
                    <span>Log out</span>
                </button>
            </div>
        </div>
    </div>
</header>

<script src="../static/JS/components/profile-dropdown.js"></script>

            <!-- Content -->
            <div class="content">
                <div class="page-header">
                    <h1 class="page-title">Dependents</h1>
                    <button class="btn-add-dependent" onclick="openAddModal()">
                        + Add Dependent
                    </button>
                </div>

                <!-- Dependents Grid -->
                <div class="dependents-grid" id="dependentsGrid">
                    {% for dependent in dependents %}
                    <div class="dependent-card">
                        <div class="card-header">
                            <div class="dependent-header">{{dependent.D_Name}}</div>
                            <div class="card-actions">
                                <button class="action-icon edit-icon" onclick="editDependent(1)" title="Edit">
                                    <img src="https://i.postimg.cc/fy3szJyY/pen_line_svgrepo_com.png" alt="Edit">
                                </button>
                                <button class="action-icon delete-icon" onclick="deleteDependent(1)" title="Delete">
                                    <img src="https://uploads.onecompiler.io/42z9qxur5/447495evw/trash-alt-svgrepo-com.png" alt="Delete">
                                </button>
                            </div>
                        </div>
                        <div class="dependent-info">
                            <div class="info-row">
                                <div class="info-item">
                                    <span class="info-label">ID:</span>
                                    <span class="info-value">{{dependent.D_ID}}</span>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="info-item">
                                    <span class="info-label">Phone:</span>
                                    <span class="info-value">{{dependent.D_Phone}}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">SSN:</span>
                                    <span class="info-value">{{dependent.D_SSN}}</span>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="info-item">
                                    <span class="info-label">Birth Date:</span>
                                    <span class="info-value">{{dependent.D_BD}}</span>
                                </div>
                            </div>
                            <div class="info-row">
                                <div class="info-item">
                                    <span class="info-label">Relationship:</span>
                                    <span class="info-value">{{dependent.D_Relation_Type}}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Gender:</span>
                                    <span class="info-value">{{dependent.D_Gender}}</span>
                                </div>
                            </div>
                            <div class="info-row full-width">
                                <div class="info-item">
                                    <span class="info-label">Military Status:</span>
                                    <span class="info-value">{{dependent.D_Marital_status}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
              </div>
            </div>

            <!-- Include footer component -->

<footer class="footer">
    <div class="footer-content">
        <p class="footer-text">¬© 2024 KIMA ASWAN Factory Chemical Management System</p>
        <p class="footer-text">Designed for efficient chemical material inventory management</p>
        <div class="footer-links">
            <a href="#" class="footer-link" data-route="privacy_policy">Privacy Policy</a>
            <a href="#" class="footer-link" data-route="terms_of_service">Terms of Service</a>
            <a href="#" class="footer-link" data-route="contact_support">Contact Support</a>
            <a href="#" class="footer-link" data-route="documentation">Documentation</a>
        </div>
    </div>
</footer>

        </main>
    </div>



    <script>
        // Search functionality
        const searchBox = document.querySelector('.search-box');
        if (searchBox) {
            searchBox.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const cards = document.querySelectorAll('.dependent-card');
                
                cards.forEach(card => {
                    const name = card.querySelector('.info-value')?.textContent.toLowerCase() || '';
                    const id = card.querySelector('.info-value')?.textContent.toLowerCase() || '';
                    
                    if (name.includes(searchTerm) || id.includes(searchTerm)) {
                        card.style.display = '';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        }

        // Navigate to add/edit dependent pages instead of modals
        function openAddModal() {
            window.location.href = '/dependent/add';
        }

        function editDependent(id) {
            window.location.href = `/dependent/edit/${id}`;
        }

        function deleteDependent(id) {
            if (confirm('Are you sure you want to delete this dependent?')) {
                // Send DELETE request to server
                console.log('Delete dependent:', id);
            }
        }
    </script>
</body>
</html>